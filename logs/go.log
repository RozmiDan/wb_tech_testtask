{"level":"info","ts":"2025-08-31T14:48:06.868Z","caller":"app/app.go:27","msg":"Starting programm"}
{"level":"info","ts":"2025-08-31T14:48:06.898Z","caller":"app/app.go:31","msg":"Migrations completed successfully\n"}
{"level":"info","ts":"2025-08-31T14:48:06.898Z","caller":"kafka/consumer.go:42","msg":"starting kafka consumer loop","component":"kafka_consumer","topic":"orders"}
{"level":"info","ts":"2025-08-31T14:48:06.905Z","caller":"usecase/find_lst_orders.go:32","msg":"cache warmed","layer":"Usecase","func":"WarmCacheLatest","count":0}
{"level":"warn","ts":"2025-08-31T14:48:06.906Z","caller":"app/app.go:66","msg":"cache warm success"}
{"level":"info","ts":"2025-08-31T14:48:06.906Z","caller":"middleware/custommiddleware.go:16","msg":"logger middleware enabled","layer":"Controller","component":"middleware/logger"}
{"level":"info","ts":"2025-08-31T14:48:06.906Z","caller":"app/app.go:77","msg":"starting server","port":"0.0.0.0:8080"}
{"level":"info","ts":"2025-08-31T14:48:14.995Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"0ef90f31-e951-47da-b2cd-e9a2be97d8c5","order_uid":"b562feb7b2b84b6test1"}
{"level":"info","ts":"2025-08-31T14:48:14.995Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"0ef90f31-e951-47da-b2cd-e9a2be97d8c5","order_uid":"b562feb7b2b84b6test1"}
{"level":"info","ts":"2025-08-31T14:48:15.002Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"0ef90f31-e951-47da-b2cd-e9a2be97d8c5","order_uid":"b562feb7b2b84b6test1"}
{"level":"info","ts":"2025-08-31T14:48:15.003Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"49ba1b1d-ca39-47a4-bb0e-62cc6ed09ffe","order_uid":"b562feb7b2b84b6test4"}
{"level":"info","ts":"2025-08-31T14:48:15.003Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"49ba1b1d-ca39-47a4-bb0e-62cc6ed09ffe","order_uid":"b562feb7b2b84b6test4"}
{"level":"info","ts":"2025-08-31T14:48:15.005Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"49ba1b1d-ca39-47a4-bb0e-62cc6ed09ffe","order_uid":"b562feb7b2b84b6test4"}
{"level":"info","ts":"2025-08-31T14:48:17.031Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"e7042856-e517-42ab-ab02-d0ed18b00e2c","order_uid":"b562feb7b2b84b6test3"}
{"level":"info","ts":"2025-08-31T14:48:17.031Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"e7042856-e517-42ab-ab02-d0ed18b00e2c","order_uid":"b562feb7b2b84b6test3"}
{"level":"info","ts":"2025-08-31T14:48:17.036Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"e7042856-e517-42ab-ab02-d0ed18b00e2c","order_uid":"b562feb7b2b84b6test3"}
{"level":"info","ts":"2025-08-31T14:48:22.090Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"d46a0225-c5f5-4d79-baca-47f319ab03a1","order_uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:48:22.090Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"d46a0225-c5f5-4d79-baca-47f319ab03a1","order_uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:48:22.091Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"d46a0225-c5f5-4d79-baca-47f319ab03a1","order_uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:48:25.917Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/","remote_addr":"172.20.0.1:34440","request_id":"901da0ed4da0/6qlPLyc7Fb-000001","request time":0.000765896}
{"level":"info","ts":"2025-08-31T14:48:25.933Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/static/styles.css","remote_addr":"172.20.0.1:34440","request_id":"901da0ed4da0/6qlPLyc7Fb-000002","request time":0.000011627}
{"level":"info","ts":"2025-08-31T14:48:25.957Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/favicon.ico","remote_addr":"172.20.0.1:34440","request_id":"901da0ed4da0/6qlPLyc7Fb-000003","request time":0.000005501}
{"level":"info","ts":"2025-08-31T14:48:27.156Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"f74a803c-4b4f-426b-bb99-799bbb6b121a","order_uid":"b562feb7b2b84b6test6"}
{"level":"info","ts":"2025-08-31T14:48:27.156Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"f74a803c-4b4f-426b-bb99-799bbb6b121a","order_uid":"b562feb7b2b84b6test6"}
{"level":"info","ts":"2025-08-31T14:48:27.160Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"f74a803c-4b4f-426b-bb99-799bbb6b121a","order_uid":"b562feb7b2b84b6test6"}
{"level":"info","ts":"2025-08-31T14:48:31.642Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/6qlPLyc7Fb-000004","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:48:31.642Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:34440","request_id":"901da0ed4da0/6qlPLyc7Fb-000004","request time":0.000541822}
{"level":"info","ts":"2025-08-31T14:48:32.219Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"d781f8bc-78a2-4af8-8907-10f060e9e5a3","order_uid":"b562feb7b2b84b6test5"}
{"level":"info","ts":"2025-08-31T14:48:32.219Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"d781f8bc-78a2-4af8-8907-10f060e9e5a3","order_uid":"b562feb7b2b84b6test5"}
{"level":"info","ts":"2025-08-31T14:48:32.224Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"d781f8bc-78a2-4af8-8907-10f060e9e5a3","order_uid":"b562feb7b2b84b6test5"}
{"level":"info","ts":"2025-08-31T14:48:37.283Z","caller":"postgre/add_order.go:119","msg":"order successfully inserted","layer":"Repository","func":"SetOrder","request_id":"6e9ce47f-1639-48c2-b093-6c014e7d8f4a","order_uid":"b562feb7b2b84b6test7"}
{"level":"info","ts":"2025-08-31T14:48:37.283Z","caller":"usecase/add_order.go:44","msg":"succsessfuly add order","layer":"Usecase","func":"AddOrderInfo","request_id":"6e9ce47f-1639-48c2-b093-6c014e7d8f4a","order_uid":"b562feb7b2b84b6test7"}
{"level":"info","ts":"2025-08-31T14:48:37.287Z","caller":"kafka/consumer.go:111","msg":"order ingested","component":"kafka_consumer","topic":"orders","request_id":"6e9ce47f-1639-48c2-b093-6c014e7d8f4a","order_uid":"b562feb7b2b84b6test7"}
{"level":"error","ts":"2025-08-31T14:48:41.863Z","caller":"drophandler/drophandler.go:24","msg":"Fatal error imitation","layer":"Controller","handler":"DropHandler","request_id":"901da0ed4da0/6qlPLyc7Fb-000005","stacktrace":"github.com/RozmiDan/wb_tech_testtask/internal/controller/http/handlers/drophandler.New.func1\n\t/wb_service/app/internal/controller/http/handlers/drophandler/drophandler.go:24\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/go-chi/chi/v5.(*Mux).routeHTTP\n\t/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:478\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/RozmiDan/wb_tech_testtask/internal/controller/http/server.InitServer.CustomLogger.func1.1\n\t/wb_service/app/internal/controller/http/middleware/custommiddleware.go:37\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/go-chi/chi/v5/middleware.URLFormat.func1\n\t/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/middleware/url_format.go:72\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/go-chi/chi/v5/middleware.RequestID.func1\n\t/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/middleware/request_id.go:76\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/go-chi/chi/v5/middleware.Recoverer.func1\n\t/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/middleware/recoverer.go:45\nnet/http.HandlerFunc.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:2322\ngithub.com/go-chi/chi/v5.(*Mux).ServeHTTP\n\t/go/pkg/mod/github.com/go-chi/chi/v5@v5.2.2/mux.go:90\nnet/http.serverHandler.ServeHTTP\n\t/usr/local/go/src/net/http/server.go:3340\nnet/http.(*conn).serve\n\t/usr/local/go/src/net/http/server.go:2109"}
{"level":"info","ts":"2025-08-31T14:48:42.121Z","caller":"app/app.go:27","msg":"Starting programm"}
{"level":"info","ts":"2025-08-31T14:48:42.130Z","caller":"app/app.go:31","msg":"Migrations completed successfully\n"}
{"level":"info","ts":"2025-08-31T14:48:42.130Z","caller":"kafka/consumer.go:42","msg":"starting kafka consumer loop","component":"kafka_consumer","topic":"orders"}
{"level":"info","ts":"2025-08-31T14:48:42.141Z","caller":"usecase/find_lst_orders.go:32","msg":"cache warmed","layer":"Usecase","func":"WarmCacheLatest","count":5}
{"level":"warn","ts":"2025-08-31T14:48:42.141Z","caller":"app/app.go:66","msg":"cache warm success"}
{"level":"info","ts":"2025-08-31T14:48:42.141Z","caller":"middleware/custommiddleware.go:16","msg":"logger middleware enabled","layer":"Controller","component":"middleware/logger"}
{"level":"info","ts":"2025-08-31T14:48:42.141Z","caller":"app/app.go:77","msg":"starting server","port":"0.0.0.0:8080"}
{"level":"info","ts":"2025-08-31T14:49:03.249Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000001","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:03.250Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000001","request time":0.000208692}
{"level":"info","ts":"2025-08-31T14:49:06.033Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000002","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:06.033Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000002","request time":0.000244634}
{"level":"info","ts":"2025-08-31T14:49:06.548Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000003","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:06.548Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000003","request time":0.000232044}
{"level":"info","ts":"2025-08-31T14:49:06.994Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000004","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:06.994Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000004","request time":0.000320897}
{"level":"info","ts":"2025-08-31T14:49:07.449Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000005","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:07.449Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000005","request time":0.000232651}
{"level":"info","ts":"2025-08-31T14:49:07.862Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000006","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:07.862Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000006","request time":0.000176615}
{"level":"info","ts":"2025-08-31T14:49:08.298Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000007","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:08.298Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000007","request time":0.000273147}
{"level":"info","ts":"2025-08-31T14:49:08.690Z","caller":"usecase/find_order.go:25","msg":"cache hit","layer":"Usecase","func":"GetOrderInfo","request_id":"901da0ed4da0/gvUyKoddAQ-000008","uid":"b562feb7b2b84b6test2"}
{"level":"info","ts":"2025-08-31T14:49:08.691Z","caller":"middleware/custommiddleware.go:31","msg":"request completed","layer":"Controller","component":"middleware/logger","method":"GET","path":"/order/b562feb7b2b84b6test2","remote_addr":"172.20.0.1:43892","request_id":"901da0ed4da0/gvUyKoddAQ-000008","request time":0.000251701}
{"level":"info","ts":"2025-08-31T14:51:11.049Z","caller":"app/app.go:85","msg":"Shutting down server..."}
{"level":"info","ts":"2025-08-31T14:51:11.049Z","caller":"kafka/consumer.go:47","msg":"context done, exiting consumer","component":"kafka_consumer","topic":"orders"}
{"level":"info","ts":"2025-08-31T14:51:11.049Z","caller":"app/app.go:58","msg":"kafka consumer stopped"}
{"level":"info","ts":"2025-08-31T14:51:15.028Z","caller":"app/app.go:96","msg":"Server gracefully stopped"}
{"level":"info","ts":"2025-08-31T14:51:15.028Z","caller":"app/app.go:99","msg":"Finishing programm"}
